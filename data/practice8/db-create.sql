# DROP DATABASE practice8;
# CREATE DATABASE practice8;
# USE practice8;

DROP TABLE IF EXISTS users_groups;
DROP TABLE IF EXISTS users;
DROP TABLE IF EXISTS groups;

# GRANT ALL ON practice8.* TO 'blackwell'@'localhost' IDENTIFIED BY 'salt';

CREATE TABLE users(
  id INT UNSIGNED NOT NULL AUTO_INCREMENT KEY,
  login VARCHAR(32) UNIQUE NOT NULL
) ENGINE=InnoDB;
CREATE TABLE groups(
  id INT UNSIGNED NOT NULL AUTO_INCREMENT KEY,
  name VARCHAR(32) UNIQUE NOT NULL
) ENGINE=InnoDB;
CREATE TABLE users_groups(
  user_id INT UNSIGNED NOT NULL,
  group_id INT UNSIGNED NOT NULL,
  FOREIGN KEY (user_id) REFERENCES users(id)
    ON DELETE CASCADE
    ON UPDATE CASCADE,
  FOREIGN KEY (group_id) REFERENCES groups(id)
    ON DELETE CASCADE
    ON UPDATE CASCADE
) ENGINE=InnoDB;

INSERT INTO users VALUES (DEFAULT , 'ivanov');
INSERT INTO groups VALUES (DEFAULT , 'teamA');
